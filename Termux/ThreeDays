#!/usr/bin/env bash

# some constant var
NVIM_ZIP_RAW="https://raw.githubusercontent.com/Tridays/command-tools/main/Termux/nvim/nvim.zip"
FONT_TAR_XZ_RAW="https://raw.githubusercontent.com/Tridays/command-tools/main/Termux/nvim/font.tar.xz"
JDK11_ZIP_RELEASES="https://github.com/WindowHZT/termux-ubuntu2004/releases/download/java-jdk-v11.0.12/openjdk-11.0.12-aarch64.zip"
DICT_ZIP_RELEASES="https://github.com/skywind3000/ECDICT-ultimate/releases/download/1.0.0/ecdict-ultimate-sqlite.zip"
NODEJS16_RAW="https://raw.githubusercontent.com/Tridays/command-tools/main/Termux/node/nodejs-16.tar.xz"
# 
FILE_BROWSER_TAR_GZ_RELEASES="https://github.com/filebrowser/filebrowser/releases/download/v2.23.0/linux-arm64-filebrowser.tar.gz"
UNBLOCK_NETEASE_MUSIC_CLONE="https://github.com/nondanee/UnblockNeteaseMusic"
MUSIC_DL_CLONE="https://github.com/0xHJK/music-dl.git"
WIKIJS_CLONE="https://github.com/requarks/wiki"

#--------------------------------------------- 1çº§èœå•ç›®å½• ---------------------------------------------
# è¯­è¨€å®‰è£…
_language(){
    main(){
    	OPTIONS=(
			 1 "Java"
             2 "Python"
             3 "C / C++"
             4 "JavaScript / node"
             5 "go"
             6 "tomcat (jsp)"
             7 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
        _dialog "é¦–é¡µâ†’é…ç½®è¯­è¨€ç¯å¢ƒ" "è¯·é€‰æ‹©" $OPTIONS
        
    }
    main
}

# ç»ˆç«¯ç¾åŒ–
_fish(){
    i(){
        _status fish
        [ "$?" != "0" ]&&_check fish
    }
    d(){
    	_command "pkg remove" "fish" "-y"
    }
    switch(){
    	 OPTIONS=(
             1 "å¼€å¯"
             2 "å…³é—­")
		_dialog "é¦–é¡µâ†’ç»ˆç«¯ç¾åŒ–â†’fishâ†’ä¸»é¢˜â†’å¼€å…³" "è¯·é€‰æ‹©" $OPTIONS
		case $op in
			1)
				_command "chsh -s fish"
				_enter
				;;
			2)
				_command "chsh -s bash"
				_enter
				;;
		esac
    }
    theme(){
    	fish <<< "omf list">/dev/null 2>&1
    	[ "$?" != "0" ]&&curl https://raw.githubusercontent.com/oh-my-fish/oh-my-fish/master/bin/install | fish &
		wait
    	fish <<< "omf theme" >~/menu
    	row=$(cat ~/menu | grep -n "Available" | awk -F ":" '{print $1}')
    	sed -i "1,$row"d ~/menu
		
		count=1
		count1=2
		count2=1
		OPTIONS[0]="0"
		OPTIONS[1]="å–æ¶ˆ"
		thing[0]="0"
		while read x
		do
			for y in $x
			do
				OPTIONS[$count1]="$count2"
				let count1++
				OPTIONS[$count1]="$y"
				thing[$count]="$y"
				let count++
				let count2++
				let count1++
			done
		done < ~/menu
		
        _dialog "é¦–é¡µâ†’ç»ˆç«¯ç¾åŒ–â†’fishâ†’ä¸»é¢˜" "è¯·é€‰æ‹©" $OPTIONS
		v=${thing[$op]}
		OPTIONS=(
			1 "å®‰è£…å¯ç”¨${thing[$op]}"
			2 "ç§»é™¤${thing[$op]}"
			3 "å–æ¶ˆ")
		_dialog "é¦–é¡µâ†’ç»ˆç«¯ç¾åŒ–â†’fishâ†’ä¸»é¢˜â†’å®‰è£…/å¸è½½" "è¯·é€‰æ‹©" $OPTIONS
		case $op in
			1)
				clear
				fish <<< "omf install $v"
				_enter
				;;
			2)
				clear
				fish <<< "omf remove $v"
				_enter
				;;
			*)
				return
				;;
		esac
    }
    main(){
        OPTIONS=(
             1 "å®‰è£…/å¸è½½fish"
             2 "å¼€å¯/å…³é—­"
             3 "ä¸»é¢˜"
             4 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
             
        _dialog "é¦–é¡µâ†’ç»ˆç«¯ç¾åŒ–â†’fish" "è¯·é€‰æ‹©" $OPTIONS
        case $op in
			1)
				OPTIONS=(
					1 "å®‰è£…fish"
					2 "å¸è½½fish"
					3 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
				_dialog "é¦–é¡µâ†’ç»ˆç«¯ç¾åŒ–â†’fishâ†’å®‰è£…/å¸è½½" "è¯·é€‰æ‹©" $OPTIONS
				case $op in
					1)
						i
						;;
					2)
						d
						;;
					*)
						return 0
						;;
					esac
				;;
			2)
		        _status fish
		        [ "$?" != "0" ]&&echo -e "${YELLOW}\n\nè¯·å…ˆå®‰è£…fish${WHITE}"&&return
		        switch
				;;
			3)
		        _status fish
		        [ "$?" != "0" ]&&echo -e "${YELLOW}\n\nè¯·å…ˆå®‰è£…fish${WHITE}"&&return
				theme
				;;
			4)
				return
				;;
		esac
    }
    main
}
_style(){
    OPTIONS=(
         1 "èƒŒæ™¯é¢œè‰²"
         2 "å­—ä½“"
         3 "zsh"
         4 "fish"
         5 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
    _dialog "é¦–é¡µâ†’ç»ˆç«¯ç¾åŒ–" "è¯·é€‰æ‹©" $OPTIONS
	case $op in
		1)
			echo 
			;;
		2)
			echo 
			;;
		3)
			echo 
			;;
		4)
			_fish
			;;
	esac    
}

# æ¢æº
_sources(){
		OPTIONS=(
			1 "å®˜æ–¹æºï¼ˆå›½å¤–ï¼‰"
			2 "æ¸…åæºï¼ˆå›½å†…ï¼‰"    
			3 "åŒ—äº¬å¤–å›½è¯­æºï¼ˆå›½å†…ï¼‰"    
			4 "é˜¿é‡Œæºï¼ˆå›½å†…ï¼‰"
			5 "ä¸­ç§‘å¤§æºï¼ˆå›½å†…ï¼‰"
			6 "<<è¿”å›ä¸Šçº§ç›®å½•>>")

    _dialog "é¦–é¡µâ†’æ›´æ¢æºsources.list" "è¯·é€‰æ‹©" $OPTIONS

	sourcesFile="/data/data/com.termux/files/usr/etc/apt/sources.list"
	case $op in
    	1)
			cat<<-EOF>$sourcesFile   ##å®˜æ–¹
			# The main termux repository, behind cloudflare cache:
			# deb https://packages-cf.termux.dev/apt/termux-main/ stable main
			# The main termux repository:
			deb https://packages.termux.dev/apt/termux-main/ stable main
			EOF
			;;
    	2)
			cat<<-EOF>$sourcesFile   ##æ¸…å
			# The termux repository mirror from TUNA:
			deb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main
			EOF
			;;
    	3)
			cat<<-EOF>"/data/data/com.termux/files/usr/etc/apt/sources.list"  ##åŒ—äº¬å¤–å›½è¯­
			# The main termux repository, behind cloudflare cache:
			# deb https://packages-cf.termux.dev/apt/termux-main/ stable main
			# The main termux repository:
			#deb https://packages.termux.dev/apt/termux-main/ stable main
			deb https://mirrors.bfsu.edu.cn/termux/apt/termux-main stable main
			EOF
			;;
    	4)
			cat<<-EOF>$sourcesFile
			# The termux repository mirror from aliyun:
			deb https://mirrors.aliyun.com/termux/termux-packages-24 stable main
			EOF
			;;
    	5)
			cat<<-EOF>$sourcesFile
			# The termux repository mirror from ustc:
			deb https://mirrors.ustc.edu.cn/termux/apt/termux-main stable main
			EOF
			;;
    	*)
			return 0
			;;
	esac
	clear
	_msg I "æ›´æ¢æˆåŠŸï¼"
	_msg W "å¦‚æœç½‘é€Ÿä¸èƒ½è·‘æ»¡ä½ çš„å®½å¸¦ç½‘ç»œï¼Œè¯·æ›´æ¢å…¶ä»–æº"
	_enter
}



#--------------------------------------------- 2çº§èœå•ç›®å½• ---------------------------------------------

_filebrowser(){
	i(){
		_checkInstall "$filebrowserPath"
		[ -z "$(dpkg -l | grep termux-services)" ]&&_command "pkg i " "termux-services " "-y"
		mkdir -p $filebrowserPath
		cd $filebrowserPath
		_github_mirror_speed_up release $FILE_BROWSER_TAR_GZ_RELEASES
		_command "wget -c " "$url" " -O filebrowser.tar.gz"
		tar -zxvf filebrowser.tar.gz
		chmod +x filebrowser
		rm filebrowser.tar.gz
		exec $filebrowserPath/filebrowser -d $filebrowserPath/filebrowser.db config init &
		exec $filebrowserPath/filebrowser users add root 888888 --perm.admin -d $filebrowserPath/filebrowser.db &
		exec $filebrowserPath/filebrowser -d $filebrowserPath/filebrowser.db config set --address 127.0.0.1 --port 1234 --root "/data/data/com.termux/files/home" --locale zh-cn &
		sleep 2
		msg I "å®‰è£…å®Œæˆï¼"
		_enter
	}
		start(){
				[ ! -e "$filebrowserPath" ]&&echo -e "${YELLOW}è¯·å…ˆå®‰è£…ï¼${WHITE}"&&_enter&&return
				_command "pkill filebrowser"
				nohup $filebrowserPath/filebrowser -d $filebrowserPath/filebrowser.db &
				echo -e "${GREEN}è®¿é—®ç½‘å€ï¼šhttp://127.0.0.1:1234${WHITE}"
				echo -e "${GREEN} è´¦å·ï¼šroot å¯†ç ï¼š888888${WHITE}"
				echo -e "${GREEN}å°æç¤ºï¼šæœåŠ¡å¼€æœºè‡ªå¯ã€‚ï¼ˆç•™termuxåå°è¿è¡Œå³å¯ï¼‰${WHITE}"
				_enter
			}
		stop(){
			[ ! -e "$filebrowserPath" ]&&echo -e "${YELLOW}è¯·å…ˆå®‰è£…ï¼${WHITE}"&&_enter&&return
				_command "pkill filebrowser"
				_enter
			}	
			
	filebrowserPath="$HOME/.filebrowser"
	    OPTIONS=(
 	        1 "å®‰è£…filebrowser"
	        2 "å¼€å¯"
	        3 "å…³é—­"
	        4 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
	    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’filebrowseræ–‡ä»¶ç®¡ç†å™¨" "è¯·é€‰æ‹©" $OPTIONS
	    case $op in
	    	1)
	    		i
	    		;;
	    	2)
	    		start
	    		;;
	    	3)
	    		stop
	    		;;
	    	*)
    		return 0
    		;;
	    esac
}
_UnblockNeteaseMusic(){
	##è§£é”ç½‘æ˜“äº‘
	i(){
		_checkInstall "$HOME/github/UnblockNeteaseMusic"
		mkdir -p $HOME/github
		cd $HOME/github
		[ -z "$(command -v node)" ]&&_command "pkg i -y" "nodejs"
		[ -z "$(command -v git)" ]&&_command "pkg i -y" "git"
		_github_mirror_speed_up clone $UNBLOCK_NETEASE_MUSIC_CLONE
		_command "git clone --depth 1" "$url"
		echo -e "${GREEN}å®‰è£…å®Œæˆ!${WHITE}"
		_enter
	}
	start(){
		[ ! -e "$HOME/github/UnblockNeteaseMusic" ]&&echo -e "${YELLOW}è¯·å…ˆå®‰è£…music-dlï¼${WHITE}"&&_enter&&return
		_command "pkill node"
		sleep 1
		_command "node $HOME/github/UnblockNeteaseMusic/app.js -p 8008 -a 127.0.0.1 "
		echo -e "$(
		cat <<-EOF
			â—nodejsæ— æ³•åå°
			â—WiFiä»£ç†ï¼šè®¾ç½®â†’WiFiâ†’é€‰æ‹©è¿æ¥çš„WiFiâ†’é«˜çº§è®¾ç½®â†’ä»£ç†ï¼ˆPACï¼‰
			    http://127.0.0.1:8008/proxy.pac
		EOF
		)"
		_enter
	}
	stop(){
		[ ! -e "$HOME/github/UnblockNeteaseMusic" ]&&echo -e "${YELLOW}è¯·å…ˆå®‰è£…music-dlï¼${WHITE}"&&_enter&&return
		_command "pkill node"
		_enter
	}
	    OPTIONS=(
 	        1 "å®‰è£…UnblockNeteaseMusic"
	        2 "å¼€å¯"
	        3 "å…³é—­"
	        4 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
	    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’UnblockNeteaseMusicè§£é”ç½‘æ˜“äº‘" "è¯·é€‰æ‹©" $OPTIONS
	    case $op in
	    	1)
	    		i
	    		;;
	    	2)
	    		start
	    		;;
	    	3)
	    		stop
	    		;;
	    	*)
    			return 0
    			;;
	    esac	
}
_music-dl(){
	i(){
		_checkInstall $HOME/github/music-dl
		[ ! "$?" == "0" ] && return 0
		[ -z "$(command -v python)" ]&&_command "pkg i -y" "python"
		[ -z "$(command -v git)" ]&&_command "pkg i -y" "git"
		mkdir -p $HOME/github
		cd $HOME/github
		_github_mirror_speed_up clone $MUSIC_DL_CLONE
		_command "git clone --depth 1 " "$url"
		cd music-dl
		pip3 install -r requirements.txt
		_enter
	}
	start(){
		[ ! -e "$HOME/github/music-dl" ]&&echo -e "${YELLOW}è¯·å…ˆå®‰è£…music-dlï¼${WHITE}"&&_enter&&return
		cd $HOME/github/music-dl
		_command "./music-dl --help"
		_command "./music-dl"
		_enter
	}
	    OPTIONS=(
 	        1 "å®‰è£…Music-dl"
	        2 "ä¸‹è½½éŸ³ä¹"
	        3 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
	    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’å…¨ç½‘éŸ³ä¹ä¸‹è½½music-dl" "è¯·é€‰æ‹©" $OPTIONS
	    case $op in
	    	1)
	    		_node i
	    		;;
	    	2)
	    		start
	    		;;
	    	*)
    			return 0
  		  		;;
	    esac	
}

_vscode-server(){
	i(){
		[ -n "$(dpkg -l | grep code-server)" ]&&echo -e "${YELLOW}æœ¬åœ°å·²å®‰è£…æœ‰ï¼Œå¦‚éœ€é‡æ–°å®‰è£…è¯·å…ˆå¸è½½${WHITE}"&&_enter&&return
		echo -e "${YELLOW}å¦‚æœç½‘é€Ÿè¿‡æ…¢ï¼Œè¯·ç§‘å­¦ä¸Šç½‘ã€‚${WHITE}"
		_command "pkg i -y" "tur-repo code-server"
		echo -e "${GREEN}å®‰è£…å®Œæˆï¼${WHITE}"
		_enter
	}
	d(){
		_command "pkg remove " "tur-repo code-server" "-y"
		echo -e "${GREEN}ç§»é™¤å®Œæˆï¼${WHITE}"
		_enter
	}
	switch(){
	    OPTIONS=(
	         1 "å¼€å¯"
	         2 "å…³é—­"
	         3 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
	    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’VScode-serverâ†’å¼€å¯/å…³é—­" "è¯·é€‰æ‹©" $OPTIONS
		case $op in
			1)
				[ -z "$(dpkg -l | grep termux-services)" ] && _command "pkg i -y" "termux-services"
				mkdir -p $PREFIX/var/service/code-server/log
				cat<<-EOF > $PREFIX/var/service/code-server/run
				#!/data/data/com.termux/files/usr/bin/sh
				code-server
				EOF
				
				cat<<-EOF > $PREFIX/var/service/code-server/log/run
				#!/data/data/com.termux/files/usr/bin/sh
				svlogger="/data/data/com.termux/files/usr/share/termux-services/svlogger"
				exec "\${svlogger}" "\$@"
				EOF
				
				chmod +x $PREFIX/var/service/code-server/run &&chmod +x $PREFIX/var/service/code-server/log/run
				_command "sv-enable code-server"
				echo -e "${YELLOW}\n-------------code-serveré…ç½®æ–‡ä»¶-------------${WHITE}"
				cat $HOME/.config/code-server/config.yaml
				echo -e "${YELLOW}---------------------------------------------------${WHITE}"
				_command "sv status code-server"
				echo -e "${GREEN}å°æç¤ºï¼šæœåŠ¡å¼€æœºè‡ªå¯ã€‚ï¼ˆç•™termuxåå°è¿è¡Œå³å¯ï¼‰${WHITE}"
				_enter
				;;
			2)
				sv-disable code-server
				sv status code-server
				pkill code-server
				kill -9 $(ps -ef | grep code-server | grep -v grep | awk -F " " '{print $2}')
				rm -rf $PREFIX/var/service/code-server
				_enter
				;;
			*)
				return 0
				;;
		esac
	}
	config(){
		address=$(dialog --clear --title "code-serverè¿æ¥åœ°å€" \
		--inputbox "è¾“å…¥ä½ çš„åœ°å€(ä¸å¡«ä¸ºé»˜è®¤å€¼)
		([é»˜è®¤127.0.0.1])" 8 50 \
		3>&1 1>&2 2>&3 3>&-)
		[ -z "$address" ]&&address=127.0.0.1
		
		port=$(dialog --clear --title "code-serverè¿æ¥ç«¯å£" \
		--inputbox "è¾“å…¥ä½ çš„ç«¯å£(ä¸å¡«ä¸ºé»˜è®¤å€¼)
		([é»˜è®¤8080])" 8 50 \
		3>&1 1>&2 2>&3 3>&-)
		[ -z "$port" ]&&port=8080
		
		password=$(dialog --clear --title "code-serverè¿æ¥å¯†ç " \
		--inputbox "è¾“å…¥ä½ çš„å¯†ç (ä¸å¡«ä¸ºé»˜è®¤å€¼)
		([é»˜è®¤ï¼šæ— ])" 8 50 \
		3>&1 1>&2 2>&3 3>&-)
		
		auth=none
		[ -z "$password" ]&&auth=password
		
		cat<<-EOF > $HOME/.config/code-server/config.yaml
		bind-addr: $address:$port
		auth: $auth
		password: $password
		cert: false
		EOF
		echo -e "${YELLOW}\n-------------code-serveré…ç½®æ–‡ä»¶-------------${WHITE}"
		cat $HOME/.config/code-server/config.yaml
		echo -e "${YELLOW}---------------------------------------------------${WHITE}"
		echo -e "${GREEN}å°æç¤ºï¼šå…³é—­åå¯åŠ¨é…ç½®ç”Ÿæ•ˆ${WHITE}"
		_enter
	}
	main(){
	    OPTIONS=(
	         1 "å®‰è£…/å¸è½½code-server"
	         2 "å¼€å¯/å…³é—­"
	         3 "ä¿®æ”¹é…ç½®æ–‡ä»¶"
			4 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
	    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’VScode-server" "è¯·é€‰æ‹©" $OPTIONS
		case $op in
			1)
				OPTIONS=(
			        1 "å®‰è£…"
			        2 "å¸è½½")
			    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’VScode-serverâ†’å®‰è£…/å¸è½½" "è¯·é€‰æ‹©" $OPTIONS
				case $op in
					1)
						i
						;;
					2)
						d
						;;
					esac
				;;
			2)
				switch
				;;
			3)
				config
				;;
			*)
	    		return 0
 		   		;;
			esac
	}
	main
}
_vimIDE(){
	coc(){
		mkdir -p ~/.vim/{autoload,plugged}  ~/.config/coc/extensions/coc-java-data/server/
		download " -c https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim -O $HOME/.vim/autoload/plug.vim"
		cd ~/.vim/plugged
		## å®‰è£…cocæ‰©å±•
		git clone --branch release https://github.com/neoclide/coc.nvim
		download "wget -c https://download.eclipse.org/jdtls/snapshots/jdt-language-server-latest.tar.gz -O ./jdt.tar.gz"
		#å°†jdt.lsçš„åŒ…è§£å‹åˆ°è¿™ä¸ªç›®å½•ä¸‹  
		tar -xzvf jdt.tar.gz -C ~/.config/coc/extensions/coc-java-data/server/
		rm -rf .git jdt.tar.gz
		cat<<-EOF>~/.vimrc
		call plug#begin('~/.vim/plugged') "æ’ä»¶é…ç½®ç›®å½•
		Plug 'neoclide/coc.nvim', {'branch': 'release'} " cocæ’ä»¶ç®¡ç†
		Plug 'honza/vim-snippets' " æä¾›å¼ºå¤§çš„ä»£ç å—
		Plug 'yianwillis/vimcdoc' " ä¸­æ–‡æ–‡æ¡£ï¼ˆvimcdocï¼‰
		Plug 'altercation/vim-colors-solarized' " ä¸»é¢˜ï¼ˆvim-colors-solarizedï¼‰
		Plug 'scrooloose/nerdtree' " ç›®å½•æ ‘(NERDTree)
		Plug 'preservim/tagbar' " æ ‡ç­¾å¯¼èˆªï¼ˆTagbarï¼‰
		Plug 'vim-scripts/taglist.vim' " æ ‡ç­¾åˆ—è¡¨(taglist.vim)
		Plug 'vim-airline/vim-airline' " çŠ¶æ€æ ä¼˜åŒ–ï¼ˆvim-airlineï¼‰
		Plug 'scrooloose/nerdcomm_enter' " æ‰¹é‡æ³¨é‡Šï¼ˆnerdcomm_enterï¼‰
		Plug 'Yggdroot/indentLine'
		call plug#end()
		EOF
		
		echo -e "${YELLOW}é¢„å®‰è£…Javaã€C/C++ã€Pythonã€Goã€Webã€MySQLã€bashã€vimscriptå¼€å‘æ’ä»¶${WHITE}"
		echo -e "${YELLOW}è‹¥å®‰è£…å¤±è´¥ï¼ˆå‡ºç°çº¢è‰²Ã—ï¼‰ï¼Œè¯·æ‰‹åŠ¨æ‰§è¡Œ vim -c :PlugInstall æˆ–å°è¯•è¾“å…¥ R é‡æ–°ä¸‹è½½${WHITE}"
		echo -e "${GREEN}æ›´å¤šæ’ä»¶è¯·è®¿é—®https://github.com/neoclide/coc.nvim/wiki/Using-coc-extensions${WHITE}"
		_enter
		# é…åˆneocomplete
		#vim -c :"CocInstall coc-java coc-snippets coc-clangd coc-python coc-go coc-html coc-emmet coc-tsserver coc-css coc-sql coc-sh coc-vimlsp " a
		vim -c :PlugInstall
	}
	ycm(){
		cat<<-EOF>~/.vimrc
		call plug#begin('~/.vim/plugged') "æ’ä»¶é…ç½®ç›®å½•
		Plug 'valloric/YouCompleteMe'
		call plug#end()
		EOF
		vim -c :PluginInstall
		cd 
		
		##å¦‚æœæƒ³è¡¥å…¨å„ç§è¯­è¨€ï¼Œåˆ™é€‰æ‹©å®Œå…¨å®‰è£…ï¼š
		##python3 install.py --all
		##å¦‚æœåªæƒ³è¡¥å…¨æŒ‡å®šè¯­è¨€ï¼Œåˆ™éœ€è¦æŒ‡å®šå¯¹åº”è¯­è¨€çš„å®‰è£…æ–¹å¼ï¼Œå¦‚è¡¥å…¨C++ï¼š
		##python3 install.py --clangd-completer
		##æˆ–è¡¥å…¨C#ï¼š
		##python3 install.py --cs-completer
		##æˆ–è¡¥å…¨Javaï¼š
		##python3 install.py --java-completer
		##æˆ–è¡¥å…¨Goï¼š
		##python3 install.py --go-completer
	}
	main(){
	    OPTIONS=(
	         1 "vim-plug+cocä»£ç è¡¥å…¨"
	         2 "vim-plug+ycmä»£ç è¡¥å…¨"
	         3 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
 	   _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’Vim IDE" "è¯·é€‰æ‹©" $OPTIONS
	    case $op in
    		1)
    			coc
    			;;
    		2)
    			ycm
    			;;
    		*)
    			return
    			;;
    	esac

	}
	_check "git" "wget" 
	main
}

_nvimIDE(){
	i(){
		clear
		echo -e "$(
			cat <<-EOF
			\n\nï½€ï½€ï½€ï½€ï½€ï½€ï½€ï½€ï½€${YELLOW} neovim IDE é…ç½®æ–¹æ¡ˆ ${WHITE}ï½€ï½€ï½€ï½€ï½€ï½€ï½€ï½€ï½€
			--${GREEN}è½¯ä»¶${WHITE}
			    nvim
			--${GREEN}åŸºæœ¬æ’ä»¶${WHITE}
			    â—wbthomason/packer.nvim æ’ä»¶åŒ…ç®¡ç†å™¨
			    â—folke/tokyonight.nvim  ä¸»é¢˜
			    â—nvim-lualine/lualine.nvim  åº•éƒ¨çŠ¶æ€æ 
			    â—kyazdani42/nvim-web-devicons  æä¾›ç‰¹æ®Šå›¾æ ‡å­—ä½“æ”¯æŒ
			    â—nvim-tree/nvim-tree.lua   æ–‡æ¡£æ ‘
			    â—nvim-tree/nvim-web-devicons treeç‰¹æ®Šå›¾æ ‡å­—ä½“æ”¯æŒ
			    â—nvim-treesitter/nvim-treesitter  æ ¹æ®ä»£ç è¿›è¡Œè¯­æ³•é¢œè‰²åŒºåˆ†
			    â—p00f/nvim-ts-rainbow  ä¸åŒçš„æ–¹æ³•å’Œç±»ï¼Œæ‹¬å·ç”¨ä¸åŒçš„é¢œè‰²åŒºåˆ†
			    â—akinsho/toggleterm.nvim  æµ®åŠ¨ç»ˆç«¯
			    â—glepnir/dashboard-nvim  å¯åŠ¨é¡µé¢
			--${GREEN}ï¼ŠJava LspæœåŠ¡å™¨${WHITE}
			    â—mfussenegger/nvim-jdtls   é’ˆå¯¹Java Lspï¼Œç”¨äºæ”¯æŒeclipse.jdt.lsçš„æ‰©å±•
			    â—williamboman/mason.nvim   lspå’Œdapçš„ä¸‹è½½å™¨ä¸ç®¡ç†
			    â—williamboman/mason-lspconfig.nvim  è¿æ¥mason.nvimä¸nvim-lspconfigçš„ä¸­é—´æ’ä»¶
			    â—neovim/nvim-lspconfig   lspå®¢æˆ·ç«¯ï¼ˆxç§»å¼ƒï¼‰
			    â—folke/lsp-colors.nvim  ä¸ºlspå®¢æˆ·ç«¯è®¾ç½®é…è‰²æ–¹æ¡ˆ
			    â—glepnir/lspsaga.nvim  è½»é‡çº§Lspæ’ä»¶ï¼Œå…·æœ‰é«˜æ€§èƒ½UIï¼ŒåŠŸèƒ½éå¸¸å¼ºï¼ˆæ˜¾ç¤ºç±»ã€æ–¹æ³•ä¿¡æ¯ï¼Œæ ¹æ®ä»£ç åˆ›å»ºå¤§çº²ï¼Œç¯æ³¡ğŸ’¡æç¤ºï¼Œæµ®åŠ¨ç»ˆç«¯ç­‰ç­‰ï¼‰
			    â—hrsh7th/cmp-nvim-lsp-signature-help   Lspæ’ä»¶ï¼ŒåŠŸèƒ½:æç¤ºæ–¹æ³•ï¼Œå‡½æ•°çš„å‚æ•°éœ€è¦
			    â—j-hui/fidget.nvim  jdtlså³ä¸‹è§’ä¿¡æ¯æç¤º
			--${GREEN}ä»£ç è¡¥å…¨${WHITE}
			    â—hrsh7th/nvim-cmp   ä»£ç è¡¥å…¨æ ¸å¿ƒæ’ä»¶
			    â—hrsh7th/cmp-nvim-lsp  æ ¹æ®lspæœåŠ¡å™¨è¿›è¡Œè¡¥å…¨æç¤º
			    â—hrsh7th/cmp-cmdline  nvimå‘½ä»¤è¡Œæ¨¡å¼æç¤º
			    â—f3fora/cmp-spell  è‹±è¯­å•è¯æ‹¼å†™è¾…åŠ©
			    â—hrsh7th/cmp-path  è·¯å¾„è¡¥å…¨æ”¯æŒ
			    â—hrsh7th/cmp-buffer  nvim-cmpçš„ç¼“å†²è¯æ¥æº
			    â—windwp/nvim-autopairs  è‡ªåŠ¨è¡¥å…¨æ‹¬å·ï¼ˆè¾“å…¥å·¦æ‹¬å·ï¼Œå…‰æ ‡ç§»åŠ¨åˆ°ä¸­é—´ï¼Œè¾“å…¥å³æ‹¬å·ï¼Œè·³å‡ºæ‹¬å·ï¼‰
			    â—tzachar/cmp-tabnine  AIè¡¥å…¨ï¼ˆæš‚æ—¶æ²¡æœ‰å…¨éƒ¨æ”¯æŒaarch64ï¼‰
			    â—L3MON4D3/LuaSnip   ä»£ç å—
			    â—saadparwaiz1/cmp_luasnip  ä»£ç å—æ”¯æŒFor luasnip users.
			    â—rafamadriz/friendly-snippets   ä»£ç å—
			    â—jose-elias-alvarez/null-ls.nvim  ä»£ç æ ¼å¼åŒ–
			--${GREEN}ï¼Šdapä»£ç è°ƒè¯•${WHITE}
			    â—mfussenegger/nvim-dap  ä»£ç è°ƒè¯•debug
			    â—rcarriga/cmp-dap  ä»£ç è°ƒè¯•
			    â—rcarriga/nvim-dap-ui  è°ƒè¯•é¡µé¢æ”¯æŒ
			    â—theHamsta/nvim-dap-virtual-text   æ­¤æ’ä»¶ä¸º nvim-dap æ·»åŠ äº†è™šæ‹Ÿæ–‡æœ¬æ”¯æŒ
			--${GREEN}å…¶ä»–éƒ¨åˆ†æ’ä»¶${WHITE}
			    â—folke/which-key.nvim  å¿«æ·é”®æç¤º
			    â—numToStr/Comment.nvim  è‡ªåŠ¨æ³¨é‡Šä»£ç 
			    â—akinsho/bufferline.nvim  é¡¶éƒ¨æ˜¾ç¤ºbufferç¼“å†²åŒº
			    â—lewis6991/gitsigns.nvim  å·¦åˆ™Gitæç¤º
			    â—nvim-telescope/telescope.nvim  é«˜åº¦å¯æ‰©å±•çš„æ¨¡ç³ŠæŸ¥æ‰¾å™¨
			    â—nvim-lua/plenary.nvim  telescope.nvimå¿…é¡»çš„ä¾èµ–æ’ä»¶
			    â—chentoast/marks.nvim  ä¸€ä¸ªè¡Œæ ‡è®°
			    â—#norcalli/nvim-colorizer   é«˜æ€§èƒ½çš„é«˜äº®æ’ä»¶(æš‚æ—¶è€ƒè™‘å¯ç”¨æ€§)
			    â—JuanZoran/Trans.nvim   è‹±æ–‡ç¿»è¯‘ï¼ˆå•è¯åŒ…128Mè§£å‹â‰ˆ1.2Gï¼‰
			    â—kkharji/sqlite.lua  ç¿»è¯‘æ•°æ®åº“ä¾èµ–
			EOF
		)"
		_enter
		_msg W "å½“å‰æºå·²åˆ‡æ¢åˆ°å¤–å›½è¯­å­¦é™¢"
		mkdir -p $HOME/{.vim/dict,.config}
		cat<<-EOF>"/data/data/com.termux/files/usr/etc/apt/sources.list"  ##åŒ—äº¬å¤–å›½è¯­
			# The main termux repository, behind cloudflare cache:
			# deb https://packages-cf.termux.dev/apt/termux-main/ stable main
			# The main termux repository:
			#deb https://packages.termux.dev/apt/termux-main/ stable main
			deb https://mirrors.bfsu.edu.cn/termux/apt/termux-main stable main
		EOF

		_command "pkg update -y"
		_command "pkg i " "tar zip neovim git zig python nodejs openjdk-17* wget stylua maven gradle lua53 ripgrep sqlite termux-api clang lua-language-server mariadb php apache2 nginx php-fpm php-apache yarn graphviz tree golang composer" " -y"
		_command "npm install -g " " eslint clangd bash-language-server vscode-langservers-extracted typescript typescript-language-server"
		_command "pip install "  " black spell autopep8 prettier flake8 debugpy ptvsd neovim"
		
		##ä¸‹è½½nvimé…ç½®
		cd $HOME/.config
		_github_mirror_speed_up raw "$NVIM_ZIP_RAW"
		_command "wget -c" "$url"
		_github_mirror_speed_up raw "$FONT_TAR_XZ_RAW"
		_command "wget -c" "$url"
		unzip -o nvim.zip
		xz -d font.tar.xz
		tar -xvf font.tar
		mv font.ttf $HOME/.termux
		rm -rf nvim.zip font.tar
		
		##ä»githubä¸‹è½½æ’ä»¶
		_msg I "è¯·ç¡®ä¿ä½ çš„ç½‘ç»œèƒ½å¤Ÿè®¿é—®åˆ° http://github.com ï¼"
		_enter
		sleep 1
		
		##ä¸‹è½½jdk11
		if [  ! -e "$PREFIX/opt/openjdk-11.0.12" ];then
			cd $PREFIX/opt
			_github_mirror_speed_up release "$JDK11_ZIP_RELEASES"
			_command "wget -c" "$url"
			unzip -o openjdk-11.0.12-aarch64.zip
			rm -rf openjdk-11.0.12-aarch64.zip
		fi
		
		##é…ç½®æ•°æ®åº“
		mysql_install_db --force	

		##ä¸‹è½½ç¦»çº¿å•è¯åŒ… 
		if test -e "$HOME/.vim/dict/ultimate.db"; then
		    _msg W "å•è¯åº“å·²å­˜åœ¨è·³è¿‡ä¸‹è½½ï¼"
		else
			cd $HOME/.vim/dict
			_github_mirror_speed_up release "$DICT_ZIP_RELEASES"
			_command "wget -c" "$url" "-O dict.zip"
			unzip dict.zip 
			rm -rf dict.zip
		fi
		echo "extra-keys = [['ESC','/','-','HOME','UP','END','KEYBOARD'],['TAB','CTRL','ALT','LEFT','DOWN','RIGHT','SHIFT']] " > $HOME/.termux/termux.properties
		
		_msg W "å…¨å±æ¨¡å¼ä¼šå±è”½æ‰‹æœºçŠ¶æ€æ ï¼Œå¹¶ä¸”åœ¨æŸäº›è®¾å¤‡ä¸Šæœ‰bugï¼Œä¸ä¸€å®šä¼šæˆåŠŸ"
		_enter
	    OPTIONS=(
         1 "éœ€è¦æ²‰æµ¸æ¨¡å¼"
         2 "ä¸éœ€è¦")
		_dialog "è¯·é—®æ˜¯å¦éœ€è¦ä½¿ç”¨å…¨å±æ¨¡å¼ï¼Ÿ" "è¯·é—®æ˜¯å¦éœ€è¦ä½¿ç”¨å…¨å±æ¨¡å¼ï¼Ÿ\nè¯·é€‰æ‹©" $OPTIONS
		case $op in
			1)
				echo "fullscreen=true" >> $HOME/.termux/termux.properties
				_msg W "å¦‚æœåœ¨ä½ çš„è®¾å¤‡ä¸Šå…¨å±æ¨¡å¼æœ‰bugï¼Œè¯·è®¿é—®wiki: https://wiki.termux.com/wiki/Terminal_Settings"
				_msg W "æˆ–è€…å–æ¶ˆå…¨å±æ¨¡å¼ï¼šæ‰“å¼€ ~/.termux/termux.properties åˆ é™¤ fullscreen=true åï¼Œä½¿ç”¨å‘½ä»¤ termux-reload-settings"
				;;
		esac
		_msg I "é…ç½®ç”Ÿæ•ˆingâ€¦â€¦ "
		_command "termux-reload-settings"
   		_msg W "è¯·ç»™termuxæƒé™ï¼"
		_enter
		_command "termux-wake-lock"
		_enter
		_command "termux-setup-storage"
		_enter
		echo -e "${GREEN} éšè—termuxåº•éƒ¨é¢å¤–é”®ï¼š ${RED}æŒ‰æ‰‹æœºéŸ³é‡é”®+ å†æŒ‰ k é”®${GREEN}ï¼ˆçœŸæ­£å…¨å±ï¼ï¼‰${WHITE}"
		echo -e "${GREEN} å¦‚æœä¸‹è½½å¤±è´¥ï¼Œè¯·å¤šæ‰§è¡Œå®‰è£…å‡ æ¬¡ï¼Œç¡®ä¿æ’ä»¶å…¨éƒ¨å®‰è£…å®Œæ¯•ã€‚${WHITE}"
		# echo -e "${GREEN} â—MySQLæ•°æ®åº“ï¼š$PREFIX/var/lib/mysql${WHITE}"
		# echo -e "${GREEN}     å¯åŠ¨MySQLæœåŠ¡ï¼šnohup mysqld & æˆ– nohup mariadbd &${WHITE}"
		# echo -e "${GREEN}     å…³é—­MySQLæœåŠ¡ï¼špkill mysqld æˆ– pkill mariadbd${WHITE}"
		# echo -e "${GREEN}     åˆæ¬¡ç™»é™†ï¼šmysql -u root${WHITE}"
		# echo -e "${GREEN}     åˆå§‹åŒ–å¯†ç ï¼šmysqladmin -u root password 123456${WHITE}"
		echo -e "${GREEN} neovim IDEå·²å‡†å¤‡å°±ç»ªï¼è¯·æ‰“å¼€å®ƒå§ã€‚${WHITE}"
		_enter;_enter
	}
	d(){
		_msg W "ä½ ç¡®å®šè¦å¸è½½å—ï¼Ÿï¼»å›è½¦ä¸¤æ¬¡å¸è½½ï¼½"
		_enter;_enter
		_command "pkg remove" "neovim" "-y"
		_command "rm -rf" "$HOME/.config/nvim $HOME/.local/share/nvim "
		_command "rm -rf" "$HOME/.vim/dict/ultimate.db $PREFIX/opt/openjdk-11.0.12"
		_msg I "neovim IDEå¸è½½å®Œæ¯•ï¼"
		_enter
	}
	ud(){
		[ ! -e "$HOME/.config/nvim" ] && _msg W "è¯·å…ˆå®‰è£…nvim IDEï¼" && return 0
		_msg I "æµ‹è¯•ç½‘ç»œè¿é€šæ€§â€¦â€¦"
		ping -c 3 gitee.com >/dev/null 2>&1 
		[  "$?" != "0" ] && _msg E "æ— æ³•è®¿é—®åˆ°Giteeï¼Œè¯·æ£€æŸ¥ç½‘ç»œ" && return 0
		_msg I "ç½‘ç»œè¿æ¥æˆåŠŸï¼"
		[ -z "$(command -v wget)" ] && _command "pkg i -y" "wget"
		_msg W "æ³¨æ„ï¼æ­¤æ“ä½œä¼šå¤‡ä»½åŸé…ç½®ï¼Œç„¶åæ¢ä¸Šæ–°é…ç½®é…ç½®ï¼"
		_msg W "å¹¶ä¸”è¯·ç¡®ä¿ä½ çš„ç½‘ç»œèƒ½å¤Ÿè®¿é—®åˆ° http://github.com ï¼"
		_enter
		cd $HOME/.config
		zip -r nvim.bak.zip nvim
		rm -rf nvim
		_msg W "æ‰“åŒ…æ—§é…ç½®ä¸º$HOME/.config/nvim.bak.zip"
		_enter
		_github_mirror_speed_up raw "$NVIM_ZIP_RAW"
		_command "wget -c" "$url"
		_github_mirror_speed_up raw "$FONT_TAR_XZ_RAW"		
		_command "wget -c" "$url"		
		unzip -o nvim.zip
		xz -d font.tar.xz
		tar -xvf font.tar
		mv font.ttf $HOME/.termux
		rm -rf nvim.zip font.tar
		sleep 1
		_msg I "æ›´æ¢nviméœ€è¦çš„å­—ä½“æ”¯æŒï¼ˆä¸Šç™¾æ¬¾å­—ä½“å¯ç”¨è®¿é—®ï¼šhttps://www.nerdfonts.comä¸‹è½½ï¼‰"
		_enter
		echo "extra-keys = [['ESC','/','-','HOME','UP','END','KEYBOARD'],['TAB','CTRL','ALT','LEFT','DOWN','RIGHT','SHIFT']] " > $HOME/.termux/termux.properties
		_msg W "å…¨å±æ¨¡å¼ä¼šå±è”½æ‰‹æœºçŠ¶æ€æ ï¼Œå¹¶ä¸”åœ¨æŸäº›è®¾å¤‡ä¸Šæœ‰bugï¼Œä¸ä¸€å®šä¼šæˆåŠŸ"
		_enter
		
	    OPTIONS=(
         1 "éœ€è¦æ²‰æµ¸æ¨¡å¼"
         2 "ä¸éœ€è¦")
		_dialog "è¯·é—®æ˜¯å¦éœ€è¦ä½¿ç”¨å…¨å±æ¨¡å¼ï¼Ÿ" "è¯·é€‰æ‹©" $OPTIONS
		case $op in
			1)
				echo "fullscreen=true" >> $HOME/.termux/termux.properties
				_msg W "å¦‚æœåœ¨ä½ çš„è®¾å¤‡ä¸Šå…¨å±æ¨¡å¼æœ‰bugï¼Œè¯·è®¿é—®wiki: https://wiki.termux.com/wiki/Terminal_Settings"
				_msg W "æˆ–è€…å–æ¶ˆå…¨å±æ¨¡å¼ï¼šæ‰“å¼€ $HOME/.termux/termux.properties åˆ é™¤ fullscreen=true åï¼Œä½¿ç”¨å‘½ä»¤ termux-reload-settings "
				;;
		esac
		_msg I "é…ç½®ç”Ÿæ•ˆingâ€¦â€¦"
		termux-reload-settings
		echo -e "${GREEN} éšè—termuxåº•éƒ¨é¢å¤–é”®ï¼š æ‰‹æœºéŸ³é‡é”®+k ï¼ˆçœŸæ­£å…¨å±ï¼ï¼‰${WHITE}"
		echo -e "${GREEN} å¦‚æœä¸‹è½½å¤±è´¥ï¼Œè¯·å¤šæ‰§è¡Œå®‰è£…å‡ æ¬¡ï¼Œç¡®ä¿æ’ä»¶å…¨éƒ¨å®‰è£…å®Œæ¯•ã€‚${WHITE}"
		echo -e "${GREEN} neovim IDEå·²å‡†å¤‡å°±ç»ªï¼è¯·æ‰“å¼€å®ƒå§ã€‚${WHITE}"
		echo -e "\n${GREEN}[$(date +"%Yå¹´%mæœˆ%dæ—¥-%Hæ—¶%Måˆ†%Sç§’")]æ›´æ–°æˆåŠŸ${WHITE}"
		_enter
	}
    OPTIONS=(
         1 "å®‰è£…nvim IDE"
         2 "å¸è½½nvim IDE"
         3 "æ›´æ–°nvim IDEé…ç½®æ–‡ä»¶"
         4 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
   _dialog "nim IDE v0.5" "è¯·é€‰æ‹©" $OPTIONS
    case $op in
   		1)
   			i
   			;;
		2)
			d
			;;
		3)
			ud
			;;
		*)
			return 0
			;;
	esac
}


# æ›´æ–°è„šæœ¬
_update(){
	[ -z "$(command -v wget)" ] && _command "pkg i -y" "wget"
	rm -rf $PREFIX/bin/td $CONFIG
	# funæ–‡ä»¶
	_github_mirror_speed_up raw $THREEDAYS_RAW
	_command "wget -c" "$url" "-O $CONFIG"
	# mainè„šæœ¬
	_github_mirror_speed_up raw $TERMUX_AARCH64_TD_RAW
	_command "wget -c" "$url" "-O $PREFIX/bin/td"
	chmod 775 $PREFIX/bin/td $CONFIG
	echo -e "\n${GREEN}[$(date +"%Yå¹´%mæœˆ%dæ—¥-%Hæ—¶%Måˆ†%Sç§’")]æ›´æ–°æˆåŠŸï¼${WHITE}"	
	exit
}

_wikijs(){
	_i(){
		echo -e "$(
			cat<<-EOF
			${GREEN}ç®€ä»‹ï¼š${WHITE}Wiki.js æ˜¯ä¸€ä¸ªåŸºäº NodeJS çš„ç°ä»£ã€è½»é‡çº§å’Œå¼ºå¤§çš„ wiki åº”ç”¨ç¨‹åºã€‚è¾ƒé€‚åˆåšå°å›¢é˜Ÿçš„çŸ¥è¯†åº“ï¼Œä¸€æ–¹é¢é€‚åˆç®¡ç†å’Œé˜…è¯»ï¼Œå¦ä¸€æ–¹é¢è¿˜èƒ½ååŒåˆ›ä½œã€‚
			${GREEN}Githubï¼š${WHITE}https://github.com/requarks/wiki
			${GREEN}ä½¿ç”¨è¯´æ˜ä¹¦ï¼š${WHITE}https://docs.requarks.io/install/requirements
			${RED}ç¯å¢ƒè¦æ±‚ï¼š${WHITE}
			\t${GREEN}æ•°æ®åº“(ä»¥ä¸‹å…¶ä¸€)ï¼š${WHITE}
			\t\tâ—MySQL â‰¥8.0
			\t\tâ—MariaDB â‰¥10.2.7
			\t\tâ—SQLite â‰¥3.9
			\t\tâ—MS SQL Server â‰¥2012  (ä»…ä¾›å‚è€ƒ)
			\t${GREEN}Node.jsï¼š${WHITE}
			\t\tâ— 16.0.0â‰¤ node <17.0.0  (æ¨è)
			EOF
		)"
		echo -en "${RED}æ˜¯å¦ç»§ç»­å®‰è£…ï¼Ÿ[Y/N]${WHITE}" ""
		read op
		[[ ! "$op" == "y" && ! "$op" == "Y" ]] || return 0
		# install wiki.js
		_checkInstall "$HOME/wiki" || return 0
		_github_mirror_speed_up clone $WIKIJS_CLONE
		_command "git clone --depth 1" "$url"
		# install nodejs-16
		cd $PREFIX/opt
		rm -rf nodejs-16*
		_github_mirror_speed_up raw $NODEJS16_RAW
		_command "wget -c" "$url"
		xz -d nodejs-16.tar.xz
		tar -xvf nodejs-16.tar
		rm -rf nodejs-16.tar
	    # é€‰æ‹©æ•°æ®åº“
	    OPTIONS=(
			1 "MySQLï½œlocalhost:3306"
			2 "MariaDBï½œlocalhost:3306"
			3 "sqliteï½œlocalhost:3306")
		_dialog "æ•°æ®åº“é€‰æ‹©" "è¯·é€‰æ‹©æ•°æ®åº“ä¿¡æ¯" $OPTIONS
		
		# æš‚ä¸”å›ºå®šä¸ºMySQL
		op=1
		# MySQL
		if [ "$op" == "1" ];then
			password=""
			while :
			do
				password=$(dialog --clear --title "è¯·è¾“å…¥MySQL ç”¨æˆ·rootçš„å¯†ç " \
				--inputbox "è¾“å…¥rootçš„å¯†ç ï¼š" 8 50 \
				3>&1 1>&2 2>&3 3>&-)
				
				clear
				mysql -uroot -p$password -e "create database if not exists wiki;show databases;"
				if [ "$?" == "0" ];then
					_msg W "æˆåŠŸåˆ›å»ºwikiæ•°æ®åº“ï¼"
					_enter
					break
				else
					_msg E "åˆ›å»ºwikiæ•°æ®åº“å¤±è´¥ï¼è¯·æ£€æŸ¥æ•°æ®åº“æ˜¯å¦åœ¨è¿è¡Œ æˆ– å¯†ç æ˜¯å¦æ­£ç¡®"
					_enter
				fi
			done
			# é…ç½®wiki.jsæ–‡ä»¶
			cd $HOME/wiki
			cp config.sample.yml config.yml
			sed -i "s#type: postgres#type: mysql#g;s#port: 5432#port: 3306#g;s#user: wikijs#user: root#g;s#pass: wikijsrocks#pass: $password#g" config.yml
		# MariaDB
		elif [ "$op" == "2" ];then
			echo
		# sqlite
		elif [ "$op" == "3" ];then
			echo
		fi
		_msg I "wiki.jså®‰è£…æˆåŠŸï¼"
		_enter
	}
    OPTIONS=(
         1 "å®‰è£…ï½œå¸è½½Wiki js"
         2 "å¯åŠ¨æœåŠ¡"
         3 "å…³é—­æœåŠ¡"
         4 "<<è¿”å›ä¸Šçº§ç›®å½•>>")
   _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹â†’Wiki.js" "è¯·é€‰æ‹©" $OPTIONS
    case $op in
   		1)
   			_i
   			;;
		2)
			_open
			;;
		3)
			_close
			;;
		*)
			return 0
			;;
	esac
}








# main
_otherOP(){
    OPTIONS=(
         1 "VScode-server"
         2 "Alist"
         3 "nvim IDE"
         4 "filebrowseræ–‡ä»¶ç®¡ç†å™¨"
         5 "çŒ›çŠ¸å……ç”µ"
         6 "è§£é”ç½‘æ˜“äº‘ç°è‰²æ­Œæ›²"
         7 "éŸ³ä¹ä¸‹è½½å™¨music-dl"
         8 "Wiki.js"
         9 "MySQL"
         10 "<<è¿”å›ä¸Šçº§ç›®å½•>>"
         11 "é€€å‡ºè„šæœ¬")
    _dialog "é¦–é¡µâ†’å…¶ä»–é€‰é¡¹" "è¯·é€‰æ‹©" $OPTIONS
    case $op in
    	1)
    		_node _vscode-server
    		;;
    	2)
    		echo
    		;;
    	3)
    		_node _nvimIDE
    		;;
    	4)
    		_node _filebrowser
    		;;
    	5)
    		echo
    		;;
    	6)
    		_node _UnblockNeteaseMusic
    		;;
    	7)
    		_node _music-dl
    		;;
    	8)
    		_wikijs
    		;;
		9)
    		_mysql
    		;;
    	10)
    		return 0
    		;;
    	*)
    		exit
    		;;
    esac
}


